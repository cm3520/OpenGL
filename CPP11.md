# cpp11

[TOC]

## Features

### _Pragma

### 委派构造函数


### 异常处理 ???


### STL中的函数对象或称仿函数 (非cpp11特性)
仿函数就是重定义了成员函数`operator()`的一种自定义类型对象。其特点是其使用在代码层面与函数的使用并无二样，但其本质却非函数。

仿函数与函数的不同：
* 仿函数可以拥有初始状态。可以通过类的私有成员，并在声明对象的时候对其进行初始化。私有成员的状态就成了仿函数的初始状态。由于声明一个仿函数对象可以拥有多个不同初始状态的实例，因此可以借助仿函数产生多个功能类似却不同的仿函数实例。


### lambda
1. 简介：lambda用来表示一种匿名函数。“函数式编程”是以其概念为基础。
~~~cpp
//lambda函数的一般形式：
[capture](parameters) mutable ->return-type{statement}
~~~
* `[capture]`: 捕捉列表。lambda总是以捕捉列表开始，[]是lambda的引出符。编译器可以根据该引出符判断接下来的代码是否是lambda函数。捕捉列表能够捕捉上下文中的变量以供lambda函数使用。
* `(parameters)`: 参数列表。与普通函数参数列表一致，如果不需要传递参数，则可以连同括号()一起省略。
* `mutable`: mutable修饰符。默认情况下lambda是一个const函数，mutable则可以取消其常量性。当使用mutable时，参数列表不可省略。
* `->return-type`: 返回类型。当不需要返回值时，可以连同->一起省略。此外当返回类型明确的情况下，也可以省略该部分，让编译器自行推导。
* `{statement}`: 函数体。内容与普通函数一样，不过除了可以使用参数之外，还可以使用所有捕获的变量。

注意：捕获列表不允许变量重复传递，即`[=,var]`是错的；而且传递只有两种：要么是值传递`[=]`，要么是引用传递`[&]`。此外lambda函数仅能捕捉其父作用域中的自动变量，捕捉任何非此作用域或是非自动变量（如静态变量等）都会导致编译器报错。


lambda与仿函数：
功能与内涵非常相似，只是lambda通过捕获参数的方式实现了仿函数通过实列化一个对象的方式初始化其成员变量。事实上，仿函数是编译器实现lambda的一种方式。在C++11总可以把lambda做为仿函数的“语法甜点”。


2. 优点：
* 除了具有仿函数的优点外；书写简单，就地定义。所以可以用来代替仿函数。
* 可以利用lambda函数来封装一些代码逻辑，使其不仅具有函数的包装性，也具有就地可见的自说明性。
* lambda可以等同于其他语言中的局部函数，但可读性更好。
* lambda与static inline函数相比并没有性能上的优势，但也不会差。

3. 使用时的注意事项：
* 值传递时，捕获后变量的值一直是不变的。引用传递时，变量保存的是最新的值。